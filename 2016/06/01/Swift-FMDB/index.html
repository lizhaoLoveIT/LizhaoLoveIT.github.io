<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>Swift FMDB | Ammar's Blog</title><meta name="description" content="Swift FMDB"><meta name="keywords" content="Swift"><meta name="author" content="Ammar"><meta name="copyright" content="Ammar"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.1/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="canonical" href="http://lizhaoloveit.cn/2016/06/01/Swift-FMDB/"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="Swift FMDB"><meta name="twitter:description" content="Swift FMDB"><meta name="twitter:image" content="https://lizhaoloveit.cn/blogimages/blog/avatar.jpg"><meta property="og:type" content="article"><meta property="og:title" content="Swift FMDB"><meta property="og:url" content="http://lizhaoloveit.cn/2016/06/01/Swift-FMDB/"><meta property="og:site_name" content="Ammar's Blog"><meta property="og:description" content="Swift FMDB"><meta property="og:image" content="https://lizhaoloveit.cn/blogimages/blog/avatar.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="prev" title="Swifter 读书笔记(一)" href="http://lizhaoloveit.cn/2016/06/23/Swifter%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0(%E4%B8%80)/"><link rel="next" title="swift基础识点" href="http://lizhaoloveit.cn/2016/05/09/Swift%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.css"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.js" defer></script><link rel="dns-prefetch" href="https://hm.baidu.com"><script><!-- hexo-inject:begin --><!-- hexo-inject:end -->var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?162506e75ffd64287398566b2f5738c8";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();</script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"VRMKRAV9AT","apiKey":"bd7157400046d0f02396708a501a3480","indexName":"lizhaoloveit","hits":{"per_page":6},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容:${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":1,"translateDelay":0,"cookieDomain":"https://lizhaoloveit.cn/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight_copy: 'true',
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: '添加书签',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天'

  
}</script><meta name="generator" content="Hexo 4.2.1"><!-- hexo-inject:begin --><!-- hexo-inject:end --></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-2"><a class="toc-link" href="#步骤一：加入-SQLite-库"><span class="toc-number">1.</span> <span class="toc-text">步骤一：加入 SQLite 库</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#步骤二：创建-SQLiteManager-类，该类实现便捷的数据库语句操作-增删改"><span class="toc-number">2.</span> <span class="toc-text">步骤二：创建 SQLiteManager 类，该类实现便捷的数据库语句操作(增删改)</span></a><ol class="toc-child"><li class="toc-item toc-level-3"><a class="toc-link" href="#初始化-SQLiteManager"><span class="toc-number">2.1.</span> <span class="toc-text">初始化 SQLiteManager</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#建表"><span class="toc-number">2.2.</span> <span class="toc-text">建表</span></a></li><li class="toc-item toc-level-3"><a class="toc-link" href="#执行-SQL-语句"><span class="toc-number">2.3.</span> <span class="toc-text">执行 SQL 语句</span></a><ol class="toc-child"><li class="toc-item toc-level-4"><a class="toc-link" href="#知识点：1-anyObject"><span class="toc-number">2.3.1.</span> <span class="toc-text">知识点：1 anyObject</span></a></li><li class="toc-item toc-level-4"><a class="toc-link" href="#知识点2：注意-Swift-中的字符串绑定"><span class="toc-number">2.3.2.</span> <span class="toc-text">知识点2：注意 Swift 中的字符串绑定</span></a></li></ol></li></ol></li><li class="toc-item toc-level-2"><a class="toc-link" href="#查询"><span class="toc-number">3.</span> <span class="toc-text">查询</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#FMDB"><span class="toc-number">4.</span> <span class="toc-text">FMDB</span></a></li></ol></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://lizhaoloveit.cn/blogimages/blog/top_img.jpg)"><div id="page-header"><span class="pull-left"> <a class="blog_title" id="site-name" href="/">Ammar's Blog</a></span><div class="open toggle-menu pull-right"><div class="menu-icon-first"></div><div class="menu-icon-second"></div><div class="menu-icon-third"></div></div><span class="pull-right menus"><div class="mobile_author_icon"><img class="lozad" data-src="https://lizhaoloveit.cn/blogimages/blog/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'"><div class="mobile_author-info__description">微信号：aicjaish</div></div><hr><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a><a class="site-page" href="/comment/"><i class="fa-fw fa fa-coffee"></i><span> 留言</span></a><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a><script>document.body.addEventListener('touchstart', function(){ });</script></div></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> 搜索</span></a></span></div><div id="post-info"><div id="post-title"><div class="posttitle">Swift FMDB</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2016-06-01<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> 更新于 2019-07-29</time><span class="post-meta__separator mobile_hidden">|</span><span class="mobile_hidden"><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Swift/">Swift</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Swift/APP%E5%BA%94%E7%94%A8/">APP应用</a></span><div class="post-meta-wordcount"><span>字数总计: </span><span class="word-count">3.1k</span><span class="post-meta__separator">|</span><span>阅读时长: 11 分钟</span></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h2 id="步骤一：加入-SQLite-库"><a href="#步骤一：加入-SQLite-库" class="headerlink" title="步骤一：加入 SQLite 库"></a>步骤一：加入 SQLite 库</h2><p>在 swift 中，如果需要使用 OC 的库，必须添加桥接文件。</p>
<!-- hexo-inject:begin --><!-- hexo-inject:end --><p>其中，libsqlite3.dylib 是 OC 写的 sqlite 库<br>我们需要创建一个桥接文件 SQLite+Bridge ，在桥接文件中需要导入库：</p>
<figure class="highlight objc"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#import <span class="meta-string">"sqlite3.h"</span></span></span><br></pre></td></tr></table></figure>
<p>然后在 Build Settings 中搜索 Bridge 配置如下：</p>
<h2 id="步骤二：创建-SQLiteManager-类，该类实现便捷的数据库语句操作-增删改"><a href="#步骤二：创建-SQLiteManager-类，该类实现便捷的数据库语句操作-增删改" class="headerlink" title="步骤二：创建 SQLiteManager 类，该类实现便捷的数据库语句操作(增删改)"></a>步骤二：创建 SQLiteManager 类，该类实现便捷的数据库语句操作(增删改)</h2><p>创建 SQLiteManager 类，设定其为单粒。</p>
<h3 id="初始化-SQLiteManager"><a href="#初始化-SQLiteManager" class="headerlink" title="初始化 SQLiteManager"></a>初始化 SQLiteManager</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * static: 保证在内存中只有一份</span></span><br><span class="line"><span class="comment"> * let: 线程安全，只能赋值一次</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">let</span> shareInstance: <span class="type">SQLiteManager</span> = <span class="type">SQLiteManager</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="keyword">init</span>() &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">super</span>.<span class="keyword">init</span>()</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 0. 获取保存数据库文件的路径</span></span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> path = <span class="type">NSSearchPathForDirectoriesInDomains</span>(.<span class="type">CachesDirectory</span>, <span class="type">NSSearchPathDomainMask</span>.<span class="type">UserDomainMask</span>, <span class="literal">true</span>).last <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    </span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> cFilePath = path.stringByAppendingString(<span class="string">"/demo.sqlite"</span>).cStringUsingEncoding(<span class="type">NSUTF8StringEncoding</span>) <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 1.定义变量保存被打开的数据库</span></span><br><span class="line"><span class="comment">//        var db: COpaquePointer = nil</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 3.创建数据库文件</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 第一个参数：需要打开的数据库的文件的路径</span></span><br><span class="line"><span class="comment">     * 第二个参数：用于保存被打开的数据库</span></span><br><span class="line"><span class="comment">     * 特点：如果指定的文件路径没有对应的数据库文件，就会自动创建一个新的，如果指定的文件路径有对应的数据库文件，就会直接打开，乳沟打开成功返回 OK</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">if</span> sqlite3_open(cFilePath, &amp;db) != <span class="type">SQLITE_OK</span> &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2.创建表</span></span><br><span class="line">    createTable()</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>init()方法主要用来创建数据库。</p>
<h3 id="建表"><a href="#建表" class="headerlink" title="建表"></a>建表</h3><figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">createTable</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="comment">// 1.编写 SQL 语句</span></span><br><span class="line">    <span class="keyword">let</span> sql = <span class="string">"CREATE TABLE IF NOT EXISTS T_Student3(id INTEGER PRIMARY KEY AUTOINCREMENT,name TEXT,age INTEGER);"</span></span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> cSql = sql.cStringUsingEncoding(<span class="type">NSUTF8StringEncoding</span>) <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2.执行 SQL 语句</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 第一个参数：一个已经打开的数据库</span></span><br><span class="line"><span class="comment">     * 第二个参数：需要执行的 SQL 语句</span></span><br><span class="line"><span class="comment">     * 第三个参数：执行 SQL 语句之后的回调</span></span><br><span class="line"><span class="comment">     * 第四个参数：回调函数的第一个参数</span></span><br><span class="line"><span class="comment">     * 第五个参数：回调函数的第二个额参数，保存错误的指针</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">if</span> sqlite3_exec(db, cSql, <span class="literal">nil</span>, <span class="literal">nil</span>,  <span class="literal">nil</span>) != <span class="type">SQLITE_OK</span> &#123;</span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"创建表失败"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"创建表成功"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="执行-SQL-语句"><a href="#执行-SQL-语句" class="headerlink" title="执行 SQL 语句"></a>执行 SQL 语句</h3><p>版本一：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">execSQL</span><span class="params">(sql: String)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="comment">// 将 sql 语句转换成 c 串</span></span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> cSql = sql.cStringUsingEncoding(<span class="type">NSUTF8StringEncoding</span>) <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> sqlite3_exec(db, cSql, <span class="literal">nil</span>, <span class="literal">nil</span>, <span class="literal">nil</span>) != <span class="type">SQLITE_OK</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>上述写法存在弊端，无法实现参数可变。这对扩展性来说是致命的。FMDB 内部使用的是可变参数实现 SQL 语句的绑定。并且根据不同的类型，绑定不同类型的数据。</p>
<p>首先，关于什么是可变参数请左转<a href="https://lizhaoloveit.com/2016/05/09/swift%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/" target="_blank" rel="noopener">Swift 基础知识点中的函数篇</a></p>
<p>所以考虑到我们可以传入不同类型，不同个数的参数，而依然不用改写代码，因此应该使用如下方法进行数据库操作</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br><span class="line">76</span><br><span class="line">77</span><br><span class="line">78</span><br><span class="line">79</span><br><span class="line">80</span><br><span class="line">81</span><br><span class="line">82</span><br></pre></td><td class="code"><pre><span class="line"></span><br><span class="line"><span class="keyword">let</span> <span class="type">SQLITE_TRANSIENT</span> = <span class="built_in">unsafeBitCast</span>(-<span class="number">1</span>, sqlite3_destructor_type.<span class="keyword">self</span>)</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">execSQL</span><span class="params">(sql: String, args: CVarArgType...)</span></span> -&gt; <span class="type">Bool</span> &#123;</span><br><span class="line">    <span class="comment">// 将 sql 语句转换成 c 串</span></span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> cSql = sql.cStringUsingEncoding(<span class="type">NSUTF8StringEncoding</span>) <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="comment">// 保存编译的结果集</span></span><br><span class="line">    <span class="keyword">var</span> statement: <span class="type">COpaquePointer</span> = <span class="literal">nil</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 1.对传入的 SQL 语句进行预编译，检查 SQL 语句是否有错误</span></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 第一个参数：数据库对象</span></span><br><span class="line"><span class="comment">     * 第二个参数：需要预编译的 SQL语句</span></span><br><span class="line"><span class="comment">     * 第三个参数：第二个的参数的最大长度，如果传入一个小于0的数，系统会自动计算 -1</span></span><br><span class="line"><span class="comment">     * 第四个参数：结果集对象，编译没问题会给这个对象赋值</span></span><br><span class="line"><span class="comment">     * 第五个参数：没用。</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="keyword">if</span> sqlite3_prepare_v2(db, cSql, -<span class="number">1</span>, &amp;statement, <span class="literal">nil</span>) != <span class="type">SQLITE_OK</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2.将传入的参数绑定到 SQL 语句上</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">var</span> index: <span class="type">Int32</span> = <span class="number">1</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 可变参数本质：数组</span></span><br><span class="line">    <span class="keyword">for</span> arg <span class="keyword">in</span> args &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 2.1 判断当前遍历到的值对应的数据类型</span></span><br><span class="line">        <span class="keyword">if</span> arg <span class="keyword">is</span> <span class="type">Int</span> &#123;</span><br><span class="line">            </span><br><span class="line">            <span class="keyword">let</span> temp = <span class="type">Int32</span>(arg <span class="keyword">as</span>! <span class="type">Int</span>)</span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * 第一个参数：预编译时的 statement</span></span><br><span class="line"><span class="comment">             * 第二个参数：告诉系统需要将参数绑定到哪个位置 该索引从1开始</span></span><br><span class="line"><span class="comment">             * 第三个参数：告诉系统需要绑定的值</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            sqlite3_bind_int(statement, index, temp)</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> arg <span class="keyword">is</span> <span class="type">Double</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> temp = arg <span class="keyword">as</span>! <span class="type">Double</span></span><br><span class="line">            sqlite3_bind_double(statement, index, temp)</span><br><span class="line">        &#125; <span class="keyword">else</span> <span class="keyword">if</span> arg <span class="keyword">is</span> <span class="type">String</span> &#123;</span><br><span class="line">            <span class="keyword">let</span> temp = arg <span class="keyword">as</span>! <span class="type">String</span></span><br><span class="line">            <span class="keyword">guard</span> <span class="keyword">let</span> cTemp = temp.cStringUsingEncoding(<span class="type">NSUTF8StringEncoding</span>) <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">/**</span></span><br><span class="line"><span class="comment">             * 第一个参数：预编译时的 statement</span></span><br><span class="line"><span class="comment">             * 第二个参数：告诉系统需要将参数绑定到哪个位置 该索引从1开始</span></span><br><span class="line"><span class="comment">             * 第三个参数：告诉系统需要绑定的值 转成 c 语言</span></span><br><span class="line"><span class="comment">             * 第四个参数：传-1系统会自动处理</span></span><br><span class="line"><span class="comment">             * 第五个参数：告诉系统如何处理传入的字符串</span></span><br><span class="line"><span class="comment">             *           如果传递 SQLITE_STATIC 0 代表告诉系统不需要任何处理，</span></span><br><span class="line"><span class="comment">             *           字符串在使用前销毁，就是乱码</span></span><br><span class="line"><span class="comment">             *           </span></span><br><span class="line"><span class="comment">             *           如果传递 SQLITE_TRANSIENT -1 代表告诉系统需要进行 copy，</span></span><br><span class="line"><span class="comment">             *           该方法内部会管理它的生命周期，当使用完成之后会自动释放。</span></span><br><span class="line"><span class="comment">             *</span></span><br><span class="line"><span class="comment">             */</span></span><br><span class="line">            </span><br><span class="line">            <span class="comment">// Swift 中没有宏定义 不能用 SQLITE_TRANSIENT</span></span><br><span class="line">            </span><br><span class="line">            sqlite3_bind_text(statement, index, cTemp, -<span class="number">1</span>, <span class="type">SQLITE_TRANSIENT</span>)</span><br><span class="line">        &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">            <span class="built_in">print</span>(<span class="string">"二进制"</span>)</span><br><span class="line">        &#125;</span><br><span class="line">        </span><br><span class="line">        index += <span class="number">1</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 3. 执行 SQL 语句 (如果是绑定的 SQL 语句 需要用 step 执行)</span></span><br><span class="line">    <span class="keyword">if</span> sqlite3_step(statement) != <span class="type">SQLITE_DONE</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">false</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 4.关闭 statement</span></span><br><span class="line">    sqlite3_finalize(statement)</span><br><span class="line">    <span class="keyword">return</span> <span class="literal">true</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h4 id="知识点：1-anyObject"><a href="#知识点：1-anyObject" class="headerlink" title="知识点：1 anyObject"></a>知识点：1 anyObject</h4><p>CVarArgType 表示 anyObject? 表示任一类型，这里其实用 any 或者 anyObject 都可以。<br>但是用 any 会更好一些。</p>
<blockquote>
<p>any 和 anyObject 的区别：<br>AnyObject 可以代表任何 class 类型的实例<br>Any 可以表示任意类型，甚至包括方法 (func) 类型</p>
</blockquote>
<p>在 OC 中，编译器不会对声明为 id 的变量进行类型检查，它可以表示任意类的实例。这时 OC 动态特性的体现。<br>Swift 最主要的用途依然是使用 Cocoa 框架开发 app。所以讲原来 id 的概念使用了一个类似的，可以代表任意 class 类型的 AnyObject 来进行替代。</p>
<p>但是 Swift 中编译器不仅不会对 AnyObject 实例的方法调用做出检查，还会在所有的 AnyObject 方法调用中返回 Optional 的结果。所以在 Swift 环境下使用起来非常麻烦，还必须先确定 AnyObject 真正的类型并进行转换以后再进行调用。</p>
<p>原来某个 API 返回的是一个 id，在 Swift 中就将被映射为 AnyObject? (因为 id 是可以指向 nil 的，所以需要一个 Optional)</p>
<p>any 则可以代表所有类型，包括 struct 和 enum </p>
<h4 id="知识点2：注意-Swift-中的字符串绑定"><a href="#知识点2：注意-Swift-中的字符串绑定" class="headerlink" title="知识点2：注意 Swift 中的字符串绑定"></a>知识点2：注意 Swift 中的字符串绑定</h4><p>由于 Swift 中没有宏这个概念，因此无法打出 OC 中的宏。在 stackoverflow 上，寻得解决方案：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="type">SQLITE_TRANSIENT</span> = <span class="built_in">unsafeBitCast</span>(-<span class="number">1</span>, sqlite3_destructor_type.<span class="keyword">self</span>)</span><br></pre></td></tr></table></figure>

<p>sqlite3_bind_text(statement, index, cTemp, -1, SQLITE_TRANSIENT)</p>
<p>在我们要保存的类中就可以直接使用封装的方法：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 保存当前学生对象</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">insertStudent</span><span class="params">()</span></span> &#123;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 1.拿到 SQL 管理者</span></span><br><span class="line">    <span class="keyword">let</span> manager = <span class="type">SQLiteManager</span>.shareInstance</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2.编写 SQL 语句</span></span><br><span class="line">    <span class="keyword">let</span> sql = <span class="string">"INSERT INTO T_Student3(name, age)VALUES(?, ?);"</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 3.执行 SQL 语句</span></span><br><span class="line">    manager.execSQL(sql, args: name, age)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>但是上述方法也有弊端，就是当插入大批量的数据时，耗时非常久。大概 10000 条数据 耗时在5秒或者6秒左右。所以我们要优化代码。 耗时的原因是：每次执行 SQL 语句，系统就会自动开启事务，当 SQL 语句执行完毕，系统就会自动提交事务并关闭事务。因此，在执行插入多条数据时，我们只需进行一次打开，提交并关闭一次事务。</p>
<p>只要我们手动开启了事务，系统就不会再自动帮我们开启事务了，只要我们自己提交了事务，系统就不会再自动帮我们提交事务了。</p>
<p>因此，我们需要自己开启事务并提交和关闭事务。</p>
<p>首先，需要在 SQLManager 类中加入开启事务、关闭事务、回滚事务的方法：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MARK: -</span></span><br><span class="line"><span class="comment">// MARK: 提供外部接口 管理 事务</span></span><br><span class="line"><span class="comment">// MARK: -</span></span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 开启事务</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">beginTransaction</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> sql = <span class="string">"BEGIN TRANSACTION;"</span>;</span><br><span class="line">    execSQL(sql)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 提交事务</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">commitTransaction</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> sql = <span class="string">"COMMIT TRANSACTION;"</span>;</span><br><span class="line">    execSQL(sql)</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 回滚事务</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">rollbackTransaction</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> sql = <span class="string">"ROLLBACK TRANSACTION;"</span>;</span><br><span class="line">    execSQL(sql)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>其次，在每次插入多条数据之前，需要手动调用该方法：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">override</span> <span class="function"><span class="keyword">func</span> <span class="title">touchesBegan</span><span class="params">(touches: Set&lt;UITouch&gt;, withEvent event: UIEvent?)</span></span> &#123;</span><br><span class="line">    <span class="comment">// 1.创建 SQLite 管理对象</span></span><br><span class="line">    <span class="keyword">let</span> manager = <span class="type">SQLiteManager</span>.shareInstance</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 记录时间</span></span><br><span class="line">    <span class="keyword">let</span> start = <span class="type">CFAbsoluteTimeGetCurrent</span>()</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2.开启事务</span></span><br><span class="line">    manager.beginTransaction()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;<span class="number">10000</span> &#123;</span><br><span class="line">        <span class="keyword">let</span> stu = <span class="type">Student</span>(name: <span class="string">"mm + \(i)"</span>, age: <span class="number">20</span> + i)</span><br><span class="line">        stu.insertStudent()</span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> end = <span class="type">CFAbsoluteTimeGetCurrent</span>()</span><br><span class="line">    <span class="comment">// 提交事务</span></span><br><span class="line">    manager.commitTransaction()</span><br><span class="line">    </span><br><span class="line">    <span class="built_in">print</span>(<span class="string">"耗时\(end - start)秒"</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>前后对比，使用手动事务提交和不使用手动事务提交的差距：</p>
<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">创建表成功</span><br><span class="line">耗时7.7067089676857秒</span><br></pre></td></tr></table></figure>

<figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">创建表成功</span><br><span class="line">耗时0.114471018314362秒</span><br></pre></td></tr></table></figure>
<p>可以看到性能提高了很多倍。</p>
<p>对于事务这个概念，其实是保证线程安全的。<br>也就是说如果执行多个 SQL 语句当做一个事务的话，一旦在执行 SQL 语句中途出现任何差错，导致语句无法正确执行下去。则可以通过事务的回滚能力回归到执行 SQL 语句之前的初始状态。这样保证一个事务能够完整的执行或者不执行。</p>
<p>rollBack 是在中途数据可能出现问题的地方，插入</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 回滚事务</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">rollbackTransaction</span><span class="params">()</span></span> &#123;</span><br><span class="line">   <span class="keyword">let</span> sql = <span class="string">"ROLLBACK TRANSACTION;"</span>;</span><br><span class="line">   execSQL(sql)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>则，如果真的出现了问题，数据就会回到最初未执行 SQL 语句的地方。</p>
<h2 id="查询"><a href="#查询" class="headerlink" title="查询"></a>查询</h2><p>查询语句与其他的 SQL 语句执行时有不同。</p>
<p>首先，与执行 SQL 语句，如果执行成功即返回 SQLITE_OK。则会将句柄给到我们。<br>通过句柄来遍历数据库，获取数据库中的数据。</p>
<p>具体代码如下：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// MARK: -</span></span><br><span class="line"><span class="comment">// MARK: 查询</span></span><br><span class="line"><span class="comment">// MARK: -</span></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">execQuery</span><span class="params">(sql: String)</span></span> -&gt; [[<span class="type">String</span>: <span class="type">AnyObject</span>]]? &#123;</span><br><span class="line">    <span class="comment">// 1. 将 SQL 语句转换为 C 语言字符串</span></span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> cSql = sql.cStringUsingEncoding(<span class="type">NSUTF8StringEncoding</span>) <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 创建句柄</span></span><br><span class="line">    <span class="keyword">var</span> statement: <span class="type">COpaquePointer</span> = <span class="literal">nil</span></span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 2.预编译 SQL 语句，检查是否有错，如果正确会将句柄返回</span></span><br><span class="line">    <span class="keyword">if</span> sqlite3_prepare_v2(db, cSql, -<span class="number">1</span>, &amp;statement, <span class="literal">nil</span>) != <span class="type">SQLITE_OK</span> &#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="literal">nil</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 创建一个数组，保存所有行的数据</span></span><br><span class="line">    <span class="keyword">var</span> dicts = [[<span class="type">String</span>: <span class="type">AnyObject</span>]]()</span><br><span class="line">    </span><br><span class="line">    <span class="comment">// 3.利用 statement 对象取出一行数据(一条记录)</span></span><br><span class="line">    <span class="keyword">while</span> sqlite3_step(statement) == <span class="type">SQLITE_ROW</span> &#123;</span><br><span class="line">        </span><br><span class="line">        <span class="keyword">var</span> record = [<span class="type">String</span>: <span class="type">AnyObject</span>]()</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 4.利用 statement 取出当前一共有多少列</span></span><br><span class="line">        <span class="keyword">let</span> <span class="built_in">count</span> = sqlite3_column_count(statement)</span><br><span class="line">        </span><br><span class="line">        <span class="comment">// 5.遍历当前行每一列</span></span><br><span class="line">        <span class="keyword">for</span> i <span class="keyword">in</span> <span class="number">0</span>..&lt;<span class="built_in">count</span> &#123;</span><br><span class="line">            <span class="comment">// 5.1 取出当前列的名称</span></span><br><span class="line">            <span class="keyword">let</span> cName = sqlite3_column_name(statement, i)</span><br><span class="line">            <span class="keyword">guard</span> <span class="keyword">let</span> name = <span class="type">String</span>(<span class="type">CString</span>: cName, encoding: <span class="type">NSUTF8StringEncoding</span>) <span class="keyword">else</span> &#123;</span><br><span class="line">                <span class="keyword">continue</span></span><br><span class="line">            &#125;</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 5.2 取出当前列的类型</span></span><br><span class="line">            <span class="keyword">let</span> type = sqlite3_column_type(statement, i)</span><br><span class="line">            </span><br><span class="line">            <span class="comment">// 5.3 判断当前列的类型</span></span><br><span class="line">            <span class="keyword">switch</span> type &#123;</span><br><span class="line">            <span class="keyword">case</span> <span class="type">SQLITE_INTEGER</span>:</span><br><span class="line">                <span class="keyword">let</span> value = <span class="type">Int</span>(sqlite3_column_int(statement, i))</span><br><span class="line">                record[name] = value</span><br><span class="line">            <span class="keyword">case</span> <span class="type">SQLITE_FLOAT</span>:</span><br><span class="line">                <span class="keyword">let</span> value = sqlite3_column_double(statement, i)</span><br><span class="line">                record[name] = value</span><br><span class="line">            <span class="keyword">case</span> <span class="type">SQLITE3_TEXT</span>:</span><br><span class="line">                </span><br><span class="line">                <span class="keyword">let</span> cStr = <span class="type">UnsafePointer</span>&lt;<span class="type">Int8</span>&gt;(sqlite3_column_text(statement, i))</span><br><span class="line">                <span class="keyword">let</span> str = <span class="type">String</span>(<span class="type">CString</span>: cStr, encoding: <span class="type">NSUTF8StringEncoding</span>)</span><br><span class="line">                record[name] = str</span><br><span class="line">            <span class="keyword">default</span>:</span><br><span class="line">                <span class="built_in">print</span>(<span class="string">"二进制"</span>)</span><br><span class="line">            &#125;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="comment">// 将当前行的字典存储到数组中</span></span><br><span class="line">        dicts.append(record)</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> dicts</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>利用句柄取出一条数据：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">sqlite3_step(statement) == <span class="type">SQLITE_ROW</span></span><br></pre></td></tr></table></figure>

<p>首先通过句柄来读取出当前一共有多少列，几多少个字段。</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> <span class="built_in">count</span> = sqlite3_column_count(statement)</span><br></pre></td></tr></table></figure>

<p>然后遍历所有字段，取出每个字段的名称(这里需要注意返回值类型)：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> cName = sqlite3_column_name(statement, i)</span><br></pre></td></tr></table></figure>
<p>cName 返回值类型为：<code>UnsafePointer&lt;Int8&gt;</code><br>关于 UnsafePointer，可查看《Swifter》第三章 13个课题 UnsafePointer</p>
<p>这里其实 cName 是一个指向 Int8 类型的指针。也就是 c 字符串，存储时需要转成 String 类型。</p>
<p>取出当前列(字段)类型：</p>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">let</span> type = sqlite3_column_type(statement, i)</span><br></pre></td></tr></table></figure>

<p>判断当前列(字段)类型<br>分别取值，并存入数组。</p>
<h2 id="FMDB"><a href="#FMDB" class="headerlink" title="FMDB"></a>FMDB</h2><p>FMDB 是 iOS 平台的 SQLite 数据库框架<br>FMDB 以 OC 的方式封装了 SQLite 的 C 语言 API</p>
<p>FMDB 使用起来面向对象。提供了多线程安全的数据库操作。</p>
<p>主要有三个主要的类：FMDatabase </p>
<ul>
<li>一个 FMDatabase 对象代表了一个单独的 SQLite 数据库，用来执行数据库语句</li>
</ul>
<p>FMResultSet</p>
<ul>
<li>使用 FMDatabase 执行查询后的结果集</li>
</ul>
<p>FMDatabaseQueue</p>
<p>使用方式：Swift 中推荐使用 cocoapods 集成<br>如果要手动集成，则需要三步：</p>
<ol>
<li>导入 FMDB 代码到工程中</li>
<li>创建桥接文件，导入 sqlite3.h 导入 FMDB.h</li>
<li>将 Swift extensions 文件内容导入</li>
</ol>
<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> db: <span class="type">FMDatabase!</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">static</span> <span class="keyword">let</span> shareInstance = <span class="type">SQLiteManager</span>()</span><br><span class="line"></span><br><span class="line"><span class="keyword">override</span> <span class="keyword">init</span>() &#123;</span><br><span class="line">    <span class="keyword">super</span>.<span class="keyword">init</span>()</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">guard</span> <span class="keyword">let</span> path = <span class="type">NSSearchPathForDirectoriesInDomains</span>(.<span class="type">CachesDirectory</span>, <span class="type">NSSearchPathDomainMask</span>.<span class="type">UserDomainMask</span>, <span class="literal">true</span>).last <span class="keyword">else</span> &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> filePath = (path <span class="keyword">as</span> <span class="type">NSString</span>).stringByAppendingPathComponent(<span class="string">"demo.sqlite"</span>)</span><br><span class="line">    </span><br><span class="line">    db = <span class="type">FMDatabase</span>(path: filePath)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">if</span> db.<span class="keyword">open</span>() == <span class="literal">false</span> &#123;</span><br><span class="line">        <span class="keyword">return</span></span><br><span class="line">    &#125;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> sql = <span class="string">"CREATE TABLE IF NOT EXISTS T_Student3(id INTEGER PRIMARY KEY AUTOINCREMENT,name TEXT,age INTEGER);"</span></span><br><span class="line">    </span><br><span class="line">    db.executeUpdate(sql, withArgumentsInArray: <span class="literal">nil</span>)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight swift"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">func</span> <span class="title">insertStudent</span><span class="params">()</span></span> &#123;</span><br><span class="line">    <span class="keyword">let</span> sql = <span class="string">"INSERT INTO T_Student3(name, age)VALUES(?, ?);"</span></span><br><span class="line">    </span><br><span class="line">    <span class="type">SQLiteManager</span>.shareInstance.db.executeUpdate(sql, withArgumentsInArray: [name, age])</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="class"><span class="keyword">class</span> <span class="title">func</span> <span class="title">loadStudent</span>() </span>&#123;</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> sql = <span class="string">"SELECT * FROM T_Student3;"</span></span><br><span class="line">    </span><br><span class="line">    <span class="keyword">let</span> resultSet = <span class="type">SQLiteManager</span>.shareInstance.db.executeQuery(sql, withArgumentsInArray: <span class="literal">nil</span>)</span><br><span class="line">    </span><br><span class="line">    <span class="keyword">while</span> resultSet.next() &#123;</span><br><span class="line">        <span class="keyword">let</span> id = resultSet.intForColumn(<span class="string">"id"</span>)</span><br><span class="line">        <span class="keyword">let</span> name = resultSet.stringForColumn(<span class="string">"name"</span>)</span><br><span class="line">        <span class="keyword">let</span> age = resultSet.intForColumn(<span class="string">"age"</span>)</span><br><span class="line">        </span><br><span class="line">        <span class="built_in">print</span>(<span class="string">"id = \(id), name = \(name), age = \(age)"</span>)</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>


</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Ammar</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://lizhaoloveit.cn/2016/06/01/Swift-FMDB/">http://lizhaoloveit.cn/2016/06/01/Swift-FMDB/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://lizhaoloveit.cn">Ammar's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/Swift/">Swift    </a></div><div class="post_share"><div class="social-share" data-image="https://lizhaoloveit.cn/blogimages/blog/avatar.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-buttom"><i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lozad post-qr-code__img" data-src="/img/wechat.jpg"><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lozad post-qr-code__img" data-src="/img/alipay.jpg"><div class="post-qr-code__desc">支付宝</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull-left"><a href="/2016/06/23/Swifter%E8%AF%BB%E4%B9%A6%E7%AC%94%E8%AE%B0(%E4%B8%80)/"><img class="prev_cover lozad" data-src="https://www.lizhaoloveit.cn/blogimages/blog/cover/1.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/2.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/3.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/4.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/5.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/6.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/7.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/8.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/9.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/10.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/11.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/12.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/13.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/14.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/15.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/16.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/17.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/18.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/19.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/20.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/21.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/22.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/23.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/24.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/25.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/26.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/27.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/28.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/29.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/31.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/32.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/33.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/34.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/35.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/36.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/37.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/38.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/39.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/40.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/41.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/42.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/43.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/44.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/45.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/46.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/47.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/48.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/49.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/50.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/51.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/52.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/53.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/54.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/55.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/56.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/57.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/58.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/59.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/60.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/62.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/63.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/64.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/65.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/66.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/67.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/68.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/69.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/70.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/71.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/72.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/73.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/74.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/75.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/76.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/77.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/78.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/79.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">上一篇</div><div class="prev_info"><span>Swifter 读书笔记(一)</span></div></a></div><div class="next-post pull-right"><a href="/2016/05/09/Swift%E5%9F%BA%E7%A1%80%E7%9F%A5%E8%AF%86%E7%82%B9/"><img class="next_cover lozad" data-src="https://www.lizhaoloveit.cn/blogimages/blog/cover/1.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/2.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/3.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/4.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/5.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/6.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/7.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/8.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/9.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/10.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/11.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/12.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/13.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/14.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/15.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/16.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/17.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/18.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/19.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/20.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/21.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/22.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/23.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/24.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/25.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/26.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/27.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/28.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/29.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/31.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/32.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/33.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/34.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/35.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/36.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/37.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/38.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/39.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/40.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/41.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/42.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/43.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/44.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/45.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/46.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/47.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/48.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/49.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/50.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/51.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/52.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/53.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/54.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/55.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/56.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/57.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/58.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/59.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/60.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/62.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/63.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/64.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/65.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/66.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/67.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/68.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/69.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/70.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/71.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/72.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/73.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/74.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/75.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/76.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/77.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/78.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/79.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>swift基础识点</span></div></a></div></nav><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i> <span>评论</span></div><div id="disqus_thread"></div><script>var unused = null;
var disqus_config = function () {
  this.page.url = 'http://lizhaoloveit.cn/2016/06/01/Swift-FMDB/';
  this.page.identifier = '2016/06/01/Swift-FMDB/';
  this.page.title = 'Swift FMDB';
}
var d = document, s = d.createElement('script');
s.src = "https://" + 'lizhao' +".disqus.com/embed.js";
s.setAttribute('data-timestamp', '' + +new Date());
(d.head || d.body).appendChild(s);</script></div></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2014 - 2024 By Ammar</div><div class="icp"><a href="https://beian.miit.gov.cn/" target="_blank" rel="noopener"><span>浙ICP备19013619号-1</span></a></div><div class="bag"><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33010502006128" target="_blank" rel="noopener"><img src="/img/beian.png"><span>浙公网安备 33010502006128号</span></a></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><section class="rightside" id="rightside"><i class="fa fa-book" id="readmode" title="阅读模式"> </i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换">繁</a><i class="far fa-moon nightshift" id="nightshift" title="夜间模式"></i></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script async src="/js/search/algolia.js"></script><script src="/js/nightshift.js"></script><script src="/js/tw_cn.js"></script><script>translateInitilization()

</script><script src="https://cdn.jsdelivr.net/npm/instant.page@1.2.2/instantpage.min.js" type="module"></script><div class="search-dialog" id="algolia-search"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div><!-- hexo-inject:begin --><!-- hexo-inject:end --></body></html>