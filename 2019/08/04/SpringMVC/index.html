<!DOCTYPE html><html lang="zh-CN"><head><meta charset="UTF-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><title>SpringMVC | Ammar's Blog</title><meta name="description" content="SpringMVC"><meta name="keywords" content="SpringMVC"><meta name="author" content="Ammar"><meta name="copyright" content="Ammar"><meta name="format-detection" content="telephone=no"><link rel="shortcut icon" href="/img/favicon.ico"><link rel="stylesheet" href="/css/index.css"><link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.11.1/css/all.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.css"><meta http-equiv="x-dns-prefetch-control" content="on"><link rel="canonical" href="http://lizhaoloveit.cn/2019/08/04/SpringMVC/"><meta name="twitter:card" content="summary_large_image"><meta name="twitter:title" content="SpringMVC"><meta name="twitter:description" content="SpringMVC"><meta name="twitter:image" content="https://lizhaoloveit.cn/blogimages/blog/avatar.jpg"><meta property="og:type" content="article"><meta property="og:title" content="SpringMVC"><meta property="og:url" content="http://lizhaoloveit.cn/2019/08/04/SpringMVC/"><meta property="og:site_name" content="Ammar's Blog"><meta property="og:description" content="SpringMVC"><meta property="og:image" content="https://lizhaoloveit.cn/blogimages/blog/avatar.jpg"><meta http-equiv="Cache-Control" content="no-transform"><meta http-equiv="Cache-Control" content="no-siteapp"><link rel="prev" title="commons-logging" href="http://lizhaoloveit.cn/2019/08/05/commons-logging/"><link rel="next" title="Spring注解开发" href="http://lizhaoloveit.cn/2019/08/04/Spring%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91/"><link rel="dns-prefetch" href="https://cdn.jsdelivr.net"><link rel="stylesheet" type="text/css" href="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.css"><script src="https://cdn.jsdelivr.net/npm/instantsearch.js@2.1.1/dist/instantsearch.min.js" defer></script><link rel="dns-prefetch" href="https://hm.baidu.com"><script>var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?162506e75ffd64287398566b2f5738c8";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();</script><script>var GLOBAL_CONFIG = { 
  root: '/',
  algolia: {"appId":"VRMKRAV9AT","apiKey":"bd7157400046d0f02396708a501a3480","indexName":"lizhaoloveit","hits":{"per_page":6},"languages":{"input_placeholder":"搜索文章","hits_empty":"找不到您查询的内容:${query}","hits_stats":"找到 ${hits} 条结果，用时 ${time} 毫秒"}},
  localSearch: undefined,
  translate: {"defaultEncoding":1,"translateDelay":0,"cookieDomain":"https://lizhaoloveit.cn/","msgToTraditionalChinese":"繁","msgToSimplifiedChinese":"简"},
  highlight_copy: 'true',
  copy: {
    success: '复制成功',
    error: '复制错误',
    noSupport: '浏览器不支持'
  },
  bookmark: {
    title: '添加书签',
    message_prev: '按',
    message_next: '键将本页加入书签'
  },
  runtime_unit: '天'

  
}</script><meta name="generator" content="Hexo 4.2.1"></head><body><i class="fa fa-arrow-right" id="toggle-sidebar" aria-hidden="true"></i><div class="auto_open" id="sidebar"><div class="sidebar-toc"><div class="sidebar-toc__title">目录</div><div class="sidebar-toc__progress"><span class="progress-notice">你已经读了</span><span class="progress-num">0</span><span class="progress-percentage">%</span><div class="sidebar-toc__progress-bar"></div></div><div class="sidebar-toc__content"><ol class="toc"><li class="toc-item toc-level-1"><a class="toc-link" href="#前端控制器"><span class="toc-number">1.</span> <span class="toc-text">前端控制器</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#第一个程序"><span class="toc-number">2.</span> <span class="toc-text">第一个程序</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Dispatcher-工作原理"><span class="toc-number">3.</span> <span class="toc-text">Dispatcher 工作原理</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SpringMVC-注解"><span class="toc-number">4.</span> <span class="toc-text">SpringMVC 注解</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#MVC-注解解析器：-lt-mvc-annotation-driver-gt"><span class="toc-number">4.1.</span> <span class="toc-text">MVC 注解解析器：&lt;mvc:annotation-driver&gt;</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#RequestMapping-注解可"><span class="toc-number">4.2.</span> <span class="toc-text">RequestMapping 注解可</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#SpringMVC-访问静态资源"><span class="toc-number">5.</span> <span class="toc-text">SpringMVC 访问静态资源</span></a></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Response"><span class="toc-number">6.</span> <span class="toc-text">Response</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#ModelAndView"><span class="toc-number">6.1.</span> <span class="toc-text">ModelAndView</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#逻辑路径"><span class="toc-number">6.2.</span> <span class="toc-text">逻辑路径</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#返回-String-响应视图"><span class="toc-number">6.3.</span> <span class="toc-text">返回 String 响应视图</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#Request"><span class="toc-number">7.</span> <span class="toc-text">Request</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#简单类型"><span class="toc-number">7.1.</span> <span class="toc-text">简单类型</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#JavaBean-类型参数"><span class="toc-number">7.2.</span> <span class="toc-text">JavaBean 类型参数</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#修改共享属性-Key-值"><span class="toc-number">7.3.</span> <span class="toc-text">修改共享属性 Key 值</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#Json-数据处理"><span class="toc-number">7.4.</span> <span class="toc-text">Json 数据处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#日期处理"><span class="toc-number">7.5.</span> <span class="toc-text">日期处理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#其他请求信息-Session、Cookie"><span class="toc-number">7.6.</span> <span class="toc-text">其他请求信息(Session、Cookie)</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#多对象封装传参"><span class="toc-number">7.7.</span> <span class="toc-text">多对象封装传参</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#拦截器"><span class="toc-number">8.</span> <span class="toc-text">拦截器</span></a><ol class="toc-child"><li class="toc-item toc-level-2"><a class="toc-link" href="#拦截原理"><span class="toc-number">8.1.</span> <span class="toc-text">拦截原理</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#使用"><span class="toc-number">8.2.</span> <span class="toc-text">使用</span></a></li><li class="toc-item toc-level-2"><a class="toc-link" href="#案例：未登录拦截的实现"><span class="toc-number">8.3.</span> <span class="toc-text">案例：未登录拦截的实现</span></a></li></ol></li><li class="toc-item toc-level-1"><a class="toc-link" href="#异常处理"><span class="toc-number">9.</span> <span class="toc-text">异常处理</span></a></li></ol></div></div></div><div id="content-outer"><div id="top-container" style="background-image: url(https://lizhaoloveit.cn/blogimages/blog/top_img.jpg)"><div id="page-header"><span class="pull-left"> <a class="blog_title" id="site-name" href="/">Ammar's Blog</a></span><div class="open toggle-menu pull-right"><div class="menu-icon-first"></div><div class="menu-icon-second"></div><div class="menu-icon-third"></div></div><span class="pull-right menus"><div class="mobile_author_icon"><img class="lozad" data-src="https://lizhaoloveit.cn/blogimages/blog/avatar.jpg" onerror="onerror=null;src='/img/friend_404.gif'"><div class="mobile_author-info__description">微信号：aicjaish</div></div><hr><div class="menus_item"><a class="site-page" href="/"><i class="fa-fw fa fa-home"></i><span> 首页</span></a><a class="site-page" href="/tags/"><i class="fa-fw fa fa-tags"></i><span> 标签</span></a><a class="site-page" href="/categories/"><i class="fa-fw fa fa-folder-open"></i><span> 分类</span></a><a class="site-page" href="/archives/"><i class="fa-fw fa fa-archive"></i><span> 归档</span></a><a class="site-page" href="/comment/"><i class="fa-fw fa fa-coffee"></i><span> 留言</span></a><a class="site-page" href="/about/"><i class="fa-fw fa fa-heart"></i><span> 关于</span></a><script>document.body.addEventListener('touchstart', function(){ });</script></div></span><span class="pull-right"><a class="site-page social-icon search"><i class="fa fa-search fa-fw"></i><span> 搜索</span></a></span></div><div id="post-info"><div id="post-title"><div class="posttitle">SpringMVC</div></div><div id="post-meta"><time class="post-meta__date"><i class="fa fa-calendar" aria-hidden="true"></i> 发表于 2019-08-04<span class="post-meta__separator">|</span><i class="fa fa-history" aria-hidden="true"></i> 更新于 2019-09-12</time><span class="post-meta__separator mobile_hidden">|</span><span class="mobile_hidden"><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Java/">Java</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Java/%E6%A1%86%E6%9E%B6/">框架</a><i class="fa fa-angle-right" aria-hidden="true"></i><i class="fa fa-inbox post-meta__icon" aria-hidden="true"></i><a class="post-meta__categories" href="/categories/Java/%E6%A1%86%E6%9E%B6/SpringMVC/">SpringMVC</a></span><div class="post-meta-wordcount"><span>字数总计: </span><span class="word-count">5.7k</span><span class="post-meta__separator">|</span><span>阅读时长: 23 分钟</span></div></div></div></div><div class="layout layout_post" id="content-inner">   <article id="post"><div class="article-container" id="post-content"><h1 id="前端控制器"><a href="#前端控制器" class="headerlink" title="前端控制器"></a>前端控制器</h1><hr>
<p>在 CS 架构标准的 MVC 模型可以主动推送数据更新视图(观察者设计模式，在模型上注册视图，当模型改变时直接通知视图刷新数据)，<strong>但是在 Web 开发中模型是无法主动推送给视图(无法主动更新用户界面)，因为在 WEB 开发是请求-响应模型</strong></p>
<p>因为要处理的功能太多：设置请求密码、接受请求参数、输入校验、参数类型转换、把参数封装成对象、文件上传、处理响应、国际化处理、自定义标签等等。所以需要一个统一的头部，过滤相同的事情。</p>
<p>Front Controller 模式，在WEB应用系统的前端设置一个入口控制器，提供一个集中处理请求的地方，先把所有的请求过滤然后分发给各自相应的处理程序。</p>
<p>一般前端控制器职责是，权限检查、日志记录等等。</p>
<p>一般把处理请求的对象成为处理器，Apache 成为 Action，EmployeeAction，Spring 叫 Controller，EmployeeController。</p>
<p><strong>一般，前端控制器要么用 Filter， 要么是 Servilet， Struts2 基于 Filter， SpringMVC 基于 Servlet。</strong></p>
<p>MVC框架，它能解决 Web 开发中的常见问题(参数接收、文件上传、表单验证、国际化)，使用简单，与Spring无缝集成。</p>
<p>Spring3.0后，全面超越 Struts2 成为最优秀的 MVC 框架，支持 RESTful 风格的 URL 请求，非常容易与其他视图技术集成，如 Velocity、FreeMarker。采用了松散耦合可插拔组件结构，比其他 MVC 框架更具扩展性和灵活性。</p>
<blockquote>
<p>Spring WebFlux 是Spring 另一个 Web 框架，基于异步非阻塞的。(需要去学习)</p>
</blockquote>
<p>SpringMVC 是同步阻塞的 IO 模型，资源浪费严重，处理比较耗时的任务，比如上传文件，服务器线程会一直等待接收文件，  Spring WebFlux 可以做到异步非阻塞。</p>
<p>SpringMVC 和 Struts2 对比：</p>
<ol>
<li>Spring MVC 的前端控制器是 Servlet，而 Stuts2 的前端控制器是 Filter。</li>
<li>Spring MVC 会稍微比 Sturts2 快，Spring MVC 是基于方法设计，处理器是单例，而 Sturts2 是基于类，每次发送一次请求都会实例一个新的 Action 对象。</li>
<li>Spring MVC 更加简洁，开发效率高，处理 AJAX 请求更方便。</li>
</ol>
<h1 id="第一个程序"><a href="#第一个程序" class="headerlink" title="第一个程序"></a>第一个程序</h1><hr>
<p>需求：实现一个 SpringMVC 的 hello 程序：</p>
<p>步骤：</p>
<ol>
<li>搭建 web 项目，拷贝 jar</li>
<li>在 web.xml 中配置前端控制器：DispatcherServlet</li>
<li>在 mvc.xml 中配置处理映射器：BeanNameUrlHandlerMapping，处理器的映射器是哪个，作用：将 XxxController 和 请求url 通过 id 或者 name 关联</li>
<li>在 mvc.xml 中配置处理器适配器：SimpleControllerHandlerAdapter(handleRequest方法)，处理器的适配器是哪个，作用：告诉调度器调用 XxxController 的哪个方法</li>
<li>在 mvc.xml 中配置视图解析器：InternalResourceViewResolver，视图解析器是谁，作用：告诉调度器使用哪个解析器解析视图。</li>
<li>在 mvc.xml 中开发和配置处理器：创建处理器对象，并根据 id、name 设置 url 路径。</li>
</ol>
<ul>
<li>第一步需要注意的点：</li>
</ul>
<p>appache 基础类库：<a href="https://www.lizhaoloveit.cn/2019/08/05/commons-logging/" target="_blank" rel="noopener">commons-logging</a><br>需要导入 Spring 核心包：<code>spring-core</code>、<code>spring-beans</code>、<code>spring-expression</code>、<code>spring-context</code><br>SpringMVC 核心包：<code>spring-web</code>、<code>spring-webmvc</code></p>
<ul>
<li>第二步：在 web.xml 中配置前端控制器</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">servlet</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>Springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet-class</span>&gt;</span>org.springframework.web.servlet.DispatcherServlet<span class="tag">&lt;/<span class="name">servlet-class</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>contextConfigLocation<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>classpath:mvc.xml<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">load-on-startup</span>&gt;</span>1<span class="tag">&lt;/<span class="name">load-on-startup</span>&gt;</span> <span class="comment">&lt;!-- 开服启动 --&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">servlet-mapping</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">servlet-name</span>&gt;</span>Springmvc<span class="tag">&lt;/<span class="name">servlet-name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">servlet-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>配置前端控制器的拦截路径，url-pattern，配置如 <code>*.do</code>、<code>*htm</code>，不会导致静态文件(jpg,js,css)被拦截，但不支持 RESTful风格，配置成/，可以支持RESTfull风格，但会导致静态文件(jpg,js,css)被拦截后不能正常显示。</p>
<p>DispatcherServlet 默认会去 WEB-INF 目录下，按照 servletName-servlet.xml 方式去加载 SpringMVC 配置文件。<em>如果 servlet-name 元素文本内容是Springmvc，则去WEB-INF 目录下寻找 Springmvc-servlet.xml 文件</em>，一般从 classpath 路径，加载 SpringMVC 的配置文件。</p>
<ul>
<li>配置处理映射器：</li>
</ul>
<p><code>&lt;bean class=&quot;org.springframework.web.servlet.handler.BeanNameUrlHandlerMapping&quot; /&gt;</code></p>
<blockquote>
<p>中配置处理映射器：处理器的映射器是哪个，BeanNameUrlHandlerMapping 作用：将 XxxController 和 请求url 通过 id 或者 name 关联</p>
</blockquote>
<ul>
<li>配置处理器适配器：</li>
</ul>
<p><code>&lt;bean class=&quot;org.springframework.web.servlet.mvc.SimpleControllerHandlerAdapter&quot;/&gt;</code></p>
<blockquote>
<p>所有适配器都要实现 HandlerAdapter 接口<br>所有处理器需要实现 Controller 接口<br>调用 Controller 处理请求的方法：handleRequest<br>SimpleControllerHandlerAdapter(handleRequest方法)，处理器的适配器是哪个，作用：告诉调度器调用 XxxController 的哪个方法</p>
</blockquote>
<ul>
<li>配置视图解析器</li>
</ul>
<p><code>&lt;bean class=&quot;org.springframework.web.servlet.view.InternalResourceViewResolver&quot;/&gt;</code></p>
<blockquote>
<p>表示配置当前我们使用的是什么视图技术，当前是jsp， default 为 JSTL。</p>
</blockquote>
<ul>
<li>开发和配置 HelloController(用id、name关联url)</li>
</ul>
<p><code>&lt;bean id=&quot;/hello&quot; class=&quot;cn.lizhaoloveit.hello.HelloController&quot;/&gt;</code></p>
<p>实现，Controller 接口</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span> <span class="keyword">implements</span> <span class="title">Controller</span> </span>&#123;</span><br><span class="line">	<span class="meta">@Override</span></span><br><span class="line">	<span class="function"><span class="keyword">public</span> ModelAndView <span class="title">handleRequest</span><span class="params">(HttpServletRequest request, HttpServletResponse response)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"hello..."</span>);</span><br><span class="line">		ModelAndView mv = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">		mv.addObject(<span class="string">"username"</span>, <span class="string">"springmvc"</span>);</span><br><span class="line">		<span class="comment">// 设置视图</span></span><br><span class="line">		mv.setViewName(<span class="string">"/WEB-INF/view/hello/hello.jsp"</span>);</span><br><span class="line">		<span class="keyword">return</span> mv;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="Dispatcher-工作原理"><a href="#Dispatcher-工作原理" class="headerlink" title="Dispatcher 工作原理"></a>Dispatcher 工作原理</h1><hr>
<p>详情请见：<a href="https://lizhaoloveit.github.io/2019/08/12/SpringMVC%E4%B9%8BDispatcher/" target="_blank" rel="noopener">SpringMVC之Dispatcher</a></p>
<h1 id="SpringMVC-注解"><a href="#SpringMVC-注解" class="headerlink" title="SpringMVC 注解"></a>SpringMVC 注解</h1><hr>
<h2 id="MVC-注解解析器：-lt-mvc-annotation-driver-gt"><a href="#MVC-注解解析器：-lt-mvc-annotation-driver-gt" class="headerlink" title="MVC 注解解析器：&lt;mvc:annotation-driver&gt;"></a>MVC 注解解析器：<code>&lt;mvc:annotation-driver&gt;</code></h2><p>会自动注册 RequestMappingHandlerMapping、RequestMappingHandlerAdapter、ExceptionHandlerExceptionResolver 三个 bean。</p>
<p>此外，还支持：</p>
<ul>
<li>支持 ConversionService 实例对表单参数进行类型转换</li>
<li>@NumberFormat、@DateTimeFormat 注解完成数据格式化操作</li>
<li>@Valid 注解对 JavaBean 实例进行 JSR303 验证</li>
<li>@RequestBody 和 @ResponseBody 注解读写 JSON</li>
</ul>
<h2 id="RequestMapping-注解可"><a href="#RequestMapping-注解可" class="headerlink" title="RequestMapping 注解可"></a>RequestMapping 注解可</h2><p>可用于类或者方法上，如果贴在雷伤，表示类中所有响应请求的方法都是以该地址作为父路径。</p>
<p>参数：</p>
<table>
<thead>
<tr>
<th>参数名</th>
<th>含义</th>
</tr>
</thead>
<tbody><tr>
<td>value</td>
<td>请求的URL</td>
</tr>
<tr>
<td>method</td>
<td>请求的 method 类型，GET、POST、PUT、DELETE</td>
</tr>
<tr>
<td>consumes</td>
<td>处理请求的提交内容类型(Content-Type)，application/json</td>
</tr>
<tr>
<td>produces</td>
<td>返回的内容类型，如 application/json;charset=UTF-8，仅当 request 请求头中的 Accept 类型中包含该指定类型才返回</td>
</tr>
<tr>
<td>params</td>
<td>request中必须包含某些参数值，才让该方法处理</td>
</tr>
<tr>
<td>headers</td>
<td>指定 request 中必须包含某些指定的 header 值，才让该方法处理</td>
</tr>
</tbody></table>
<h1 id="SpringMVC-访问静态资源"><a href="#SpringMVC-访问静态资源" class="headerlink" title="SpringMVC 访问静态资源"></a>SpringMVC 访问静态资源</h1><hr>
<p><strong>当设置 Dispatcher 的 url-pattern 为 / ，当请求一个资源时，比如 js.html，Dispatcher 会忽略 .html，只拿到 js 去寻找动态文件(jsp)，如果没有找到，就会把该资源抛给 Tomcat，让 Tomcat 处理。</strong></p>
<p><strong>如果此时，刚好有一个 Controller 的 @RequestMapping(“/js”) 为js，而 js 的方法返回的字符串恰好为 js.html，则就会形成死循环。会无限找动态资源，找到后返回 js.html，又会去找 js。报错如下：</strong></p>
<blockquote>
<p>javax.servlet.ServletException: Circular view path [/js.html]: would dispatch back to the current handler URL [/js.html] again. Check your ViewResolver setup! (Hint: This may be the result of an unspecified view, due to default view name generation.)</p>
</blockquote>
<p>解决访问静态资源的三种方式：</p>
<p>url-pattern 拦截方式：</p>
<ul>
<li><code>*.do</code>、<code>*.htm</code> 是最传统方式，不会导致静态文件(jpg、js、css)被拦截，但不支持 RESTful风格。</li>
<li>配置成 / ，可以支持 RESTful 分各个，但会导致静态文件被拦截后不能正常显示，原因，Tomcat 自己的 web.xml 配置在处理静态文件会用到 DefaultServlet，而且url-pattern 为 / ，所以我们的 DispatcherServlet 的映射路径覆盖了 Tomcat 默认对静态资源的处理路径，此时 SpringMVC 会把静态资源当做 Controller，寻找并访问，结果肯定是找不到</li>
<li>为什么不用 <code>/*</code> ? 因为如果用 <code>/*</code> jsp 中的语法不会起作用，会原样输出。而 <code>/</code> 不会。</li>
</ul>
<p>解决方案一：</p>
<p><code>&lt;mvc:default-servlet-handler/&gt;</code></p>
<p>在 SpringMVC 上下文中定义一个 DefaultServletHttpRequestHandler，它会对进入 DispatcherServlet 的请求进行筛选，如果发现是没有经过映射的请求，就将该请求交给 Tomcat 默认的 Servlet 处理，如果不是静态资源的请求，才由 DispatcherServlet 继续处理。</p>
<p>解决方案二：</p>
<p>资源映射</p>
<p><code>&lt;mvc:resources location=&quot;/&quot; mapping=&quot;/**&quot;/&gt;</code><br><code>&lt;mvc:resources&gt;</code> 更进一步，由 SpringMVC 框架自己处理静态资源，并添加一些有用的附加功能。允许静态资源放在任何地方，如 WEB-INF 目录下，类路径下，甚至可以把 JS 等静态文件打包到 jar 中，通过 location 属性指定静态资源的位置，由于 location 属性时 Resource 类型，所以可以使用前缀  classpath。</p>
<p>示例：</p>
<p><img src="https://www.lizhaoloveit.cn/blogimages/java/frames/spring/15646458668753-springmvc.png" alt="2019-08-05 at 8.28 P"></p>
<p><code>&lt;mvc:resources location=&quot;classpath:/static/&quot; mapping=&quot;/**&quot;&gt;&lt;/mvc:resources&gt;</code></p>
<p>Mapped to ResourceHttpRequestHandler [“classpath:/static/“]<br>映射路径。</p>
<h1 id="Response"><a href="#Response" class="headerlink" title="Response"></a>Response</h1><hr>
<p>@Controller 中的方法可以有多个不同类型的参数，一个多种类型的返回结果。我们只能用到其中不多的类型<br>所有类型如下图：</p>
<p><img src="https://www.lizhaoloveit.cn/blogimages/java/frames/spring/15650773515430-springmvc.jpg" alt=""></p>
<p><img src="https://www.lizhaoloveit.cn/blogimages/java/frames/spring/15650774008380-springmvc.jpg" alt=""></p>
<p>配置项目 spring-web 项目</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/response"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">HelloController</span></span></span><br></pre></td></tr></table></figure>

<h2 id="ModelAndView"><a href="#ModelAndView" class="headerlink" title="ModelAndView"></a>ModelAndView</h2><hr>
<p>从 ModelAndView 的属性：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/** View instance or view name String. */</span></span><br><span class="line"><span class="meta">@Nullable</span></span><br><span class="line"><span class="keyword">private</span> Object view;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** Model Map. */</span></span><br><span class="line"><span class="meta">@Nullable</span></span><br><span class="line"><span class="keyword">private</span> ModelMap model;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** Optional HTTP status for the response. */</span></span><br><span class="line"><span class="meta">@Nullable</span></span><br><span class="line"><span class="keyword">private</span> HttpStatus status;</span><br><span class="line"></span><br><span class="line"><span class="comment">/** Indicates whether or not this instance has been cleared with a call to &#123;<span class="doctag">@link</span> #clear()&#125;. */</span></span><br><span class="line"><span class="keyword">private</span> <span class="keyword">boolean</span> cleared = <span class="keyword">false</span>;</span><br></pre></td></tr></table></figure>

<p><strong>view</strong></p>
<p>可以传入一个 View 视图，也可以传入 viewName 字符串。<br><code>setViewName:(String viewName)</code>本身其实是传入一个视图的路径。</p>
<p>View 视图发现是一个接口，看看有哪些实现类：<strong>cmd + T</strong></p>
<p><img src="https://www.lizhaoloveit.cn/blogimages/java/frames/spring/15650774008381-springmvc.png" alt="2019-08-06 at 3.52 P"></p>
<p>还记得当时配置视图解析器时创建的对象<br><strong>org.springframework.web.servlet.view.InternalResourceViewResolver</strong> ，就是用来解析 指定路径的JSP视图文件的。</p>
<p><strong>model</strong></p>
<p>model 的类型是 ModelMap，<code>ModelMap extends LinkedHashMap&lt;String, Object&gt;</code>，可以看到就是一个 HashMap。</p>
<h2 id="逻辑路径"><a href="#逻辑路径" class="headerlink" title="逻辑路径"></a>逻辑路径</h2><hr>
<p><strong>物理路径 = 前缀路径 + 逻辑路径 + 后缀路径</strong></p>
<p>项目中为了管理业务代码，会把视图分模块、存放，比如</p>
<p><img src="https://www.lizhaoloveit.cn/blogimages/java/frames/spring/15650774008382-springmvc.png" alt="2019-08-06 at 4.08 P"></p>
<p>每次访问 JSP 时，都要带上路径 “WEB-INF/View/“ 和 后缀 “.JSP”，非常的麻烦。</p>
<p>所以在创建视图解析器时，<strong>InternalResourceViewResolver</strong> 的父类 <strong>UrlBasedViewResolver</strong> ，有两个方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setPrefix</span><span class="params">(@Nullable String prefix)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.prefix = (prefix != <span class="keyword">null</span> ? prefix : <span class="string">""</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">setSuffix</span><span class="params">(@Nullable String suffix)</span> </span>&#123;</span><br><span class="line">	<span class="keyword">this</span>.suffix = (suffix != <span class="keyword">null</span> ? suffix : <span class="string">""</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>可以设置前缀和后缀路径，mvc.xml </p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- IoC 注解解释器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">context:component-scan</span> <span class="attr">base-package</span>=<span class="string">"cn.lizhaoloveit.hello"</span>/&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- mvc 注解解释器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.web.servlet.view.InternalResourceViewResolver"</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"prefix"</span> <span class="attr">value</span>=<span class="string">"/WEB-INF/view/"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"suffix"</span> <span class="attr">value</span>=<span class="string">".jsp"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line"><span class="comment">&lt;!-- &lt;mvc:default-servlet-handler/&gt; --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:resources</span> <span class="attr">location</span>=<span class="string">"classpath:/static/"</span> <span class="attr">mapping</span>=<span class="string">"/**"</span>&gt;</span><span class="tag">&lt;/<span class="name">mvc:resources</span>&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/test2"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">test2</span><span class="params">()</span> </span>&#123;</span><br><span class="line">	System.out.println(<span class="string">"hello..."</span>);</span><br><span class="line">	ModelAndView mv = <span class="keyword">new</span> ModelAndView();</span><br><span class="line">	mv.addObject(<span class="string">"username"</span>, <span class="string">"springmvc"</span>);</span><br><span class="line">	<span class="comment">// 逻辑路径，物理路径为 /WEB-INF/view/response/hello.jsp</span></span><br><span class="line">	mv.setViewName(<span class="string">"response/hello"</span>);</span><br><span class="line">	<span class="keyword">return</span> mv;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="返回-String-响应视图"><a href="#返回-String-响应视图" class="headerlink" title="返回 String 响应视图"></a>返回 String 响应视图</h2><hr>
<p>前面介绍了返回 ModelAndView 对象响应，也可以通过返回字符串路径去访问前端页面。有三种形式：</p>
<ul>
<li>第一种</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 知识点：返回 逻辑路径</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/test3"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">test3</span><span class="params">(Model model)</span> </span>&#123;</span><br><span class="line">	System.out.println(<span class="string">"hello..."</span>);</span><br><span class="line">	model.addAttribute(<span class="string">"username"</span>, <span class="string">"springmvc"</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="string">"response/hello"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>可以在方法中出现的参数如上图</p>
</blockquote>
<ul>
<li>第二种</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 知识点：forward 转发</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/test4"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">test4</span><span class="params">(Model model)</span> </span>&#123;</span><br><span class="line">	System.out.println(<span class="string">"hello..."</span>);</span><br><span class="line">	model.addAttribute(<span class="string">"username"</span>, <span class="string">"springmvc"</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="string">"forward:/hello.html"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>如果返回没有带/，forward:hello.html，表示从当前路径转发，而不是跟路径转发。</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 知识点：redirect 重定向</span></span><br><span class="line"><span class="comment"> * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/test5"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">test5</span><span class="params">(Model model)</span> </span>&#123;</span><br><span class="line">	System.out.println(<span class="string">"hello..."</span>);</span><br><span class="line">	model.addAttribute(<span class="string">"username"</span>, <span class="string">"springmvc"</span>);</span><br><span class="line">	<span class="keyword">return</span> <span class="string">"redirect:/hello.html"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>地址栏显示 localhost/hello.html?username=springmvc，使用 redirect: 相当于将冒号后面的路径直接拼到域名下并访问。</p>
</blockquote>
<blockquote>
<p>如果要重定向到某个 jsp，需要通过 Controller 中的 RequestMapping 映射。比如：重定向到列表页 <code>redirect:/dept/list</code> 相当于在浏览器中输入 <code>localhost/dept/list</code></p>
</blockquote>
<h1 id="Request"><a href="#Request" class="headerlink" title="Request"></a>Request</h1><hr>
<p>SpringMVC 获取请求参数：<strong>请求行、请求头、请求体</strong></p>
<p><img src="https://www.lizhaoloveit.cn/blogimages/java/frames/spring/15650924057257-springmvc.jpg" alt=""></p>
<p><strong>Servlet API</strong></p>
<hr>
<p>为了操作 Servlet API 对象，可以直接以参数形式传递、也可以通过 DI 注入。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Autowired</span></span><br><span class="line"><span class="keyword">private</span> ServletContext servletContext;</span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/test1"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">(HttpServletRequest request, HttpServletSession session)</span> </span>&#123;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="简单类型"><a href="#简单类型" class="headerlink" title="简单类型"></a>简单类型</h2><hr>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// localhost/request/test1  GET OR POST:username=李朝&amp;age=17</span></span><br><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/request"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RequestController</span> </span>&#123;</span><br><span class="line">	<span class="meta">@RequestMapping</span>(<span class="string">"/test1"</span>)</span><br><span class="line">	<span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test1</span><span class="params">(String username)</span> </span>&#123;</span><br><span class="line">		System.out.println(<span class="string">"test1"</span>);</span><br><span class="line">		System.out.println(username);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * GET 打印结果： </span></span><br><span class="line"><span class="comment"> * test1</span></span><br><span class="line"><span class="comment"> * 李朝</span></span><br><span class="line"><span class="comment"> * 17</span></span><br><span class="line"><span class="comment"> * 需要注意的是：如果缺少了 age 属性，会出现异常，因为框架底层做了强转String-&gt;int</span></span><br><span class="line"><span class="comment"> * 等于调用了 null.parseInt() 方法</span></span><br><span class="line"><span class="comment"> * POST 打印结果：</span></span><br><span class="line"><span class="comment"> * test2</span></span><br><span class="line"><span class="comment"> * ææ</span></span><br><span class="line"><span class="comment"> * 17</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>注意：之所以传入中文不会乱码，是因为 Tomcat7 在 GET 请求中做了支持中文的转码，但 POST 请求中没有，因此 POST 请求传入中文会出现乱码。</p>
</blockquote>
<p>框架支持直接传入接收的参数名。<strong>如果请求参数和 Controller 方法的形参不同名，使用 @RequestParam 注解贴在形参上，设置对应的请求参数名称。</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// localhost/request/test2   GET OR POST:name=李朝&amp;age=17</span></span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/test2"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test2</span><span class="params">(@RequestParam(<span class="string">"name"</span>)</span>String username, <span class="keyword">int</span> age) </span>&#123;</span><br><span class="line">	System.out.println(<span class="string">"test2"</span>);</span><br><span class="line">	System.out.println(username);</span><br><span class="line">	System.out.println(age);</span><br><span class="line">&#125;</span><br><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 打印结果： </span></span><br><span class="line"><span class="comment"> * test1</span></span><br><span class="line"><span class="comment"> * 李朝</span></span><br><span class="line"><span class="comment"> * 17</span></span><br><span class="line"><span class="comment"> */</span></span><br></pre></td></tr></table></figure>

<p><strong>POST 请求时中文乱码问题</strong></p>
<p>web.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 解决 POST 请求中文乱码问题 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">filter</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterEncoding<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">filter-class</span>&gt;</span>org.springframework.web.filter.CharacterEncodingFilter<span class="tag">&lt;/<span class="name">filter-class</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>encoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>UTF-8<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceRequestEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">init-param</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">param-name</span>&gt;</span>forceResponseEncoding<span class="tag">&lt;/<span class="name">param-name</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">param-value</span>&gt;</span>true<span class="tag">&lt;/<span class="name">param-value</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">init-param</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter</span>&gt;</span></span><br><span class="line">	</span><br><span class="line"><span class="tag">&lt;<span class="name">filter-mapping</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">filter-name</span>&gt;</span>characterEncoding<span class="tag">&lt;/<span class="name">filter-name</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">url-pattern</span>&gt;</span>/*<span class="tag">&lt;/<span class="name">url-pattern</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">filter-mapping</span>&gt;</span></span><br></pre></td></tr></table></figure>

<blockquote>
<p>需要说明的是：如果在应用中已经有了其他编码了，需要设置 <strong>org.springframework.web.filter.CharacterEncodingFilter</strong> 的两个参数。<code>forceRequestEncoding</code>、<code>forceResponseEncoding</code></p>
</blockquote>
<h2 id="JavaBean-类型参数"><a href="#JavaBean-类型参数" class="headerlink" title="JavaBean 类型参数"></a>JavaBean 类型参数</h2><hr>
<p>能够自动把请求参数封装到 Controller 方法的形参对象中，<strong>此时请求参数必须和对象的属性同名</strong>，如果页面中有多个同名参数，需要使用对应的 JavaBean 类型名.参数名的形式传递。比如</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"form-group"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">label</span> <span class="attr">for</span>=<span class="string">"name"</span> <span class="attr">class</span>=<span class="string">"col-sm-4 control-label"</span>&gt;</span>客户姓名：<span class="tag">&lt;/<span class="name">label</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">div</span> <span class="attr">class</span>=<span class="string">"col-sm-8"</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">name</span>=<span class="string">"customer.name"</span> <span class="attr">readonly</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"hidden"</span> <span class="attr">class</span>=<span class="string">"form-control"</span> <span class="attr">name</span>=<span class="string">"customer.id"</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>上面的 name 属性设置为 customer.name、customer.id 当表单提交时，会被封装成 Customer 对象的 name 属性和 id 属性。</p>
<blockquote>
<p>只要方法中有参数，参数必然不会为空，即使所有参数的属性都为空，SpringMVC 都会为其生成一个所有属性为 null 的参数。</p>
</blockquote>
<p><strong>数组、List</strong></p>
<p>复选框、批量删除</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/test4"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test4</span><span class="params">(Long[] ids)</span> </span>&#123;</span><br><span class="line">    System.out.println(Arrays.asList(ids));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>浏览器请求URL:/request/test4?ids=10&amp;ids=20&amp;ids=30，参数名与数组名相同</strong></p>
<p>使用 List 类型封装参数，必须绑定在对象上，不能直接作为 Controller 方法参数</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">FormBean</span> </span>&#123;</span><br><span class="line">    <span class="keyword">private</span> List&lt;Long&gt; ids = <span class="keyword">new</span> ArrayList&lt;Long&gt;();</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>接受 List 类型参数：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/test5"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test5</span><span class="params">(FormBean fb)</span> </span>&#123;</span><br><span class="line">    System.out.println(Arrays.asList(fb.getIds()));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>浏览器请求URL:/request/test4?ids[0]=10&amp;ids[1]=20&amp;ids[2]=30</strong></p>
<h2 id="修改共享属性-Key-值"><a href="#修改共享属性-Key-值" class="headerlink" title="修改共享属性 Key 值"></a>修改共享属性 Key 值</h2><hr>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/test6"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test6</span><span class="params">(User u)</span> </span>&#123;</span><br><span class="line">    u.setUsername(<span class="string">"jj"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"request/other"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>此时，可以在 JSP 页面上，通过${user} 获取共享数据<br>如果使用 ModelAttribute 注解，可以自定义共享数据的 key。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/test7"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test7</span><span class="params">(@ModelAttribute(<span class="string">"myUser"</span>)</span>User u) </span>&#123;</span><br><span class="line">    u.setUsername(<span class="string">"jj"</span>);</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"request/other"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p>此时 JSP 页面上，可以通过 ${myUser} 获取共享数据</p>
<p><strong>平时做条件过滤查询，常用 ModelAttribute 共享数据</strong></p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@requestMapping</span>(<span class="string">"Xxx"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">publishAuditList</span><span class="params">(@ModelAttribute(<span class="string">"go"</span>)</span>BigRequestQueryObject qo, Model model) </span>&#123;</span><br><span class="line">    qo.setBidRequestState(BidConst.BIDREQUEST_STATE_PUBLISH_PENDING);</span><br><span class="line">    model.addAttribute(<span class="string">"pageInfo"</span>, bidRequestService.query(qo));</span><br><span class="line">    <span class="keyword">return</span> <span class="string">"bidrequest/publish_audit"</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="Json-数据处理"><a href="#Json-数据处理" class="headerlink" title="Json 数据处理"></a>Json 数据处理</h2><hr>
<p>见文章 <a href="https://www.lizhaoloveit.cn/2019/03/31/Ajax/#Json-%E6%95%B0%E6%8D%AE%E5%A4%84%E7%90%86" target="_blank" rel="noopener">Ajax</a></p>
<p>SpringMVC 返回 Json 数据时，如果数据时纯字符串，会出现中文乱码问题。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"content"</span>)</span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">travelContent</span><span class="params">(Long travelId)</span> </span>&#123;</span><br><span class="line">    String content = travelService.getContent(travelId);</span><br><span class="line">    <span class="keyword">return</span> content;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>解决方案：</p>
<ul>
<li>使用（produces = “application/json; charset=utf-8”）</li>
</ul>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(value=<span class="string">"/getUsersByPage"</span>,produces = <span class="string">"application/json; charset=utf-8"</span>)</span><br><span class="line"><span class="comment">//    @RequestMapping("/getUsersByPage")</span></span><br><span class="line"><span class="meta">@ResponseBody</span></span><br><span class="line"><span class="function"><span class="keyword">public</span> String <span class="title">getUsersByPage</span><span class="params">(String page, String rows, String text, HttpServletRequest request,HttpServletResponse response)</span></span></span><br></pre></td></tr></table></figure>

<ul>
<li>在springmvc.xml文件中添加</li>
</ul>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 处理请求返回json字符串的中文乱码问题 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.http.converter.StringHttpMessageConverter"</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"supportedMediaTypes"</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;<span class="name">list</span>&gt;</span></span><br><span class="line">                    <span class="tag">&lt;<span class="name">value</span>&gt;</span>application/json;charset=UTF-8<span class="tag">&lt;/<span class="name">value</span>&gt;</span></span><br><span class="line">                <span class="tag">&lt;/<span class="name">list</span>&gt;</span></span><br><span class="line">            <span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">        <span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;/<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="日期处理"><a href="#日期处理" class="headerlink" title="日期处理"></a>日期处理</h2><hr>
<p>JSP 中显示 Date 类型 (Date -&gt; String)</p>
<p><code>taglibs-standard-spec</code>、<code>taglibs-standard-impl</code></p>
<p><strong>@DateTimeFormat(pattern=”…”)、@ControllerAdvice</strong></p>
<blockquote>
<p>方式一：在对象字段或形参上添加 <strong>@DateTimeFormat</strong> 注解</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/test8"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test8</span><span class="params">(@DateTimeFormat(pattern = <span class="string">"yyyy-MM-dd"</span>)</span>Date d) </span>&#123;</span><br><span class="line">    syso(d)</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Date 作为对象的字段存在。此时在该字段上贴</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="meta">@DateTimeFormat</span></span><br><span class="line">    <span class="keyword">private</span> Date hiredate;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>方式二：在 Controller 类中加入以下代码</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initBinderDateType</span><span class="params">(WebDataBinder binder)</span> </span>&#123;</span><br><span class="line">    SimpleDateFormat sdf = <span class="keyword">new</span> SimpleDateFormat();</span><br><span class="line">    sdf.applyPattern(<span class="string">"yyyy-MM-dd"</span>);</span><br><span class="line">    binder.registerCustomEditor(java.util.Date.class, <span class="keyword">new</span> CustomDateEditor(sdf, <span class="keyword">true</span>));</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<p><strong>不推荐，因为此时只能在 Controller 类中使用，其他 Controller 的 Date 类型不能转换。</strong></p>
<blockquote>
<p>方式三：使用 @ControllerAdvice 注解</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@ControllerAdvice</span></span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">DateFormatControllerAdvice</span> </span>&#123;</span><br><span class="line">    <span class="meta">@InitBinder</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initBinderDateType</span><span class="params">(WebDataBinder binder)</span> </span>&#123;</span><br><span class="line">        SimpleDateFormat sdf1 = <span class="keyword">new</span> SimpleDateFormat();</span><br><span class="line">        sdf.applyPattern(<span class="string">"yyyy-MM-dd"</span>);</span><br><span class="line">        CustomDateEditor orderDateEditor = <span class="keyword">new</span> CustomDateEditor(sdf1, <span class="keyword">true</span>); </span><br><span class="line">        DateFormat sdf2 = <span class="keyword">new</span> SimpleDateFormat(<span class="string">"MMM d, YYYY"</span>);  </span><br><span class="line">        CustomDateEditor shipDateEditor = <span class="keyword">new</span> CustomDateEditor(sdf2, <span class="keyword">true</span>); </span><br><span class="line">        binder.registerCustomEditor(Date.class, <span class="string">"orderDate"</span>, orderDateEditor);  </span><br><span class="line">        binder.registerCustomEditor(Date.class, <span class="string">"shipDate"</span>, shipDateEditor);  </span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>此时，需要保证 DateFormatControllerAdvice 类所在包能被组件扫描器扫描即可，也就是 &lt;context:component-scan base-package=”cn.lizhaoloveit.hello”&gt;</p>
<blockquote>
<p>但是这个是旧版本的 SpringMVC 这样处理，新版本的 SpringMVC 应该是改用了 converter 接口。</p>
</blockquote>
<p><strong>响应 Json 格式 Date 类型数据处理</strong></p>
<p>问题：后台往前台响应数据，若返回数据存在 Date 类型字段，SpringMVC 自动把 Date 类型数据解析成毫秒值</p>
<blockquote>
<p>方式一 在需要解析的字段上添加注解</p>
</blockquote>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">User</span> </span>&#123;</span><br><span class="line">    <span class="meta">@JsonFormat</span>(pattern = <span class="string">"yyyy-MM-dd HH:mm:ss"</span>, timezone = <span class="string">"GMT+8"</span>)</span><br><span class="line">    <span class="keyword">private</span> Date hiredate;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<blockquote>
<p>方式二 在 mvc.xml 中配置全局的解析器</p>
</blockquote>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">mvc:annotation-driven</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"org.springframework.http.converter.json.MappingJackson2HttpMessageConverter"</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"objectMapper"</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"com.fasterxml.jackson.databind.ObjectMapper"</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;<span class="name">property</span> <span class="attr">name</span>=<span class="string">"dateFormat"</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"java.text.SimpleDateFormat"</span>&gt;</span></span><br><span class="line">							<span class="tag">&lt;<span class="name">constructor-arg</span> <span class="attr">type</span>=<span class="string">"java.lang.String"</span> <span class="attr">value</span>=<span class="string">"yyyy-MM-dd HH:mm:ss"</span>&gt;</span><span class="tag">&lt;/<span class="name">constructor-arg</span>&gt;</span></span><br><span class="line">						<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">					<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">				<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">			<span class="tag">&lt;/<span class="name">property</span>&gt;</span></span><br><span class="line">		<span class="tag">&lt;/<span class="name">bean</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">mvc:message-converters</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:annotation-driven</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="其他请求信息-Session、Cookie"><a href="#其他请求信息-Session、Cookie" class="headerlink" title="其他请求信息(Session、Cookie)"></a>其他请求信息(Session、Cookie)</h2><hr>
<p><strong>获取请求头信息</strong></p>
<p>@RequestHeader </p>
<p><strong>获取 Cookie 信息</strong></p>
<p>@CookieValue</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/test7"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">test7</span><span class="params">(FormBean bean, </span></span></span><br><span class="line"><span class="function"><span class="params">		@RequestHeader(<span class="string">"User-Agent"</span>)</span> String userAgent,</span></span><br><span class="line"><span class="function">		@<span class="title">CookieValue</span><span class="params">(<span class="string">"JSESSIONID"</span>)</span> String cookieName) </span>&#123;</span><br><span class="line">	System.out.println(<span class="string">"test7"</span>);</span><br><span class="line">	System.out.println(userAgent);</span><br><span class="line">	System.out.println(cookieName);</span><br><span class="line">	System.out.println(bean);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>操作 HttpSession</strong></p>
<p>默认情况下，模型数据保存到 request 作用域，如果需要保存到 session，使用 SessionAttributes 注解。@SessionAttributes 贴在处理器上，生命 HttpSession 级别存储的属性，通常列出模型属性 @ModelAttribute 对应的名称，这些属性会自动保存到 session 中。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@Controller</span></span><br><span class="line"><span class="meta">@SessionAttributes</span>(<span class="string">"USER_IN_SESSION"</span>)</span><br><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/request"</span>)</span><br><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">RequestController</span> </span>&#123;</span><br><span class="line">    <span class="meta">@RequestMapping</span>(<span class="string">"/test8"</span>)</span><br><span class="line">    <span class="function"><span class="keyword">public</span> String <span class="title">test8</span><span class="params">(FormBean bean, Model model)</span> </span>&#123;</span><br><span class="line">    	System.out.println(<span class="string">"test8"</span>);</span><br><span class="line">    	System.out.println(bean);</span><br><span class="line">    	model.addAttribute(<span class="string">"USER_IN_SESSION"</span>, bean);</span><br><span class="line">    	<span class="keyword">return</span> <span class="string">"request/request"</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>
<blockquote>
<p>${requestScope.USER_IN_SESSION.username }<br>${sessionScope.USER_IN_SESSION.username }</p>
</blockquote>
<p>都可以拿到数据</p>
<blockquote>
<p><code>${cookie.username.name}</code>获得 cookie 名称 – “username”，<code>${cookie.username.value}</code>获得 cookie 值– “Username in cookie”。</p>
</blockquote>
<h2 id="多对象封装传参"><a href="#多对象封装传参" class="headerlink" title="多对象封装传参"></a>多对象封装传参</h2><hr>
<p>假设有两个类 Cat 和 Dog，这两个类中有相同的属性 name 和 age。</p>
<p>期望在提交表单时，同时保存 Cat 和 Dog 信息</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">form</span> <span class="attr">action</span>=<span class="string">"/request/save"</span> <span class="attr">method</span>=<span class="string">"POST"</span>&gt;</span></span><br><span class="line">    狗狗姓名:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"dog.name"</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    狗狗年龄:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"dog.age"</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    猫猫姓名:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"cat.name"</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    猫猫年龄:<span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"text"</span> <span class="attr">name</span>=<span class="string">"cat.age"</span>/&gt;</span><span class="tag">&lt;<span class="name">br</span>/&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">input</span> <span class="attr">type</span>=<span class="string">"submit"</span> <span class="attr">value</span>=<span class="string">"提交"</span>/&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">form</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>Controller 方法：</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@RequestMapping</span>(<span class="string">"/save"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> ModelAndView <span class="title">save</span><span class="params">(Cat cat, Dog dog)</span> </span>&#123;</span><br><span class="line">    System.out.println(cat);</span><br><span class="line">    System.out.println(dog);</span><br><span class="line">    <span class="keyword">return</span> <span class="keyword">null</span>;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>SpringMVC 不支持 Struts2 中类似 对象名.属性名 的传参方式。<br>此时需要对数据设置绑定规则：</p>
<p>InitBinder 注解：自定义数据绑定注册支持，用于将请求参数转换到命令对象属性的对应类型。</p>
<p>由 @InitBinder 注解标注的方法，可以对 WebDataBinder 进行初始化，WebDataBinder 是 DataBinder 的子类，用于完成由请求参数到 JavaBean 的属性绑定。</p>
<p>@InitBinder 标注的方法不能有返回值，必须声明为 void<br>@InitBinder 标注的方法的参数通常是 WebDataBinder。</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">@InitBinder</span>(<span class="string">"Cat"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initBinderCatType</span><span class="params">(WebDataBinder binder)</span> </span>&#123;</span><br><span class="line">    binder.setFieldDefaultPrefix(<span class="string">"cat."</span>);</span><br><span class="line">&#125;</span><br><span class="line"><span class="meta">@InitBinder</span>(<span class="string">"Dog"</span>)</span><br><span class="line"><span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">initBinderDogType</span><span class="params">(WebDataBinder binder)</span> </span>&#123;</span><br><span class="line">    binder.setFieldDefaultPrefix(<span class="string">"Dog."</span>);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h1 id="拦截器"><a href="#拦截器" class="headerlink" title="拦截器"></a>拦截器</h1><hr>
<p>作用：拦截经过处理器的请求。</p>
<p>基于处理器，在 mvc.xml 中配置，由 Spring 容器创建并放在 Spring 容器中，可以注入其他 bean ，假设配置 /**，对所有的经过处理器的请求进行拦截。</p>
<blockquote>
<p>为什么不用过滤器实现登录<br>登录想拦截的东西是对数据库的 crud 操作，现在对数据库的增删改查都是写在 Controller 中，所以不需要使用向过滤器这样大的拦截范围，只需要拦截 Controller 就行，所以使用拦截器即可。<br><a href="https://www.lizhaoloveit.cn/blogimages/java/frames/spring" target="_blank" rel="noopener">https://www.lizhaoloveit.cn/blogimages/java/frames/spring</a></p>
</blockquote>
<h2 id="拦截原理"><a href="#拦截原理" class="headerlink" title="拦截原理"></a>拦截原理</h2><hr>
<p><img src="https://www.lizhaoloveit.cn/blogimages/java/frames/spring/15655904258763-springmvc.jpg" alt=""></p>
<ol>
<li>preHandle 方法<ul>
<li>请求到达处理器之前，预先执行这个前置处理方法，返回 false，请求直接返回，不会传递到链中的下一个拦截器，更不会传递到处理链末端的 Handler 中。</li>
</ul>
</li>
<li>postHandle 方法<ul>
<li>控制器方法执行后，视图渲染之前会执行(可以加入以下统一的响应信息)</li>
</ul>
</li>
<li>afterCompletion 方法<ul>
<li>视图渲染之后执行(处理 Controller 异常信息，记录操作日志，清理资源)</li>
</ul>
</li>
</ol>
<h2 id="使用"><a href="#使用" class="headerlink" title="使用"></a>使用</h2><hr>
<p>mvc.xml 中配置</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配置拦截器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- /* 表示只能拦截一级路径，/** 表示可以拦截一级或者多级路径 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">"/**"</span>/&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 不想拦截的路径 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">mvc:exclude-mapping</span> <span class="attr">path</span>=<span class="string">"/login"</span>/&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 拦截器，可以配置多个，会按顺序执行整个拦截链条 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"cn.lizhaoloveit.ssm.web.interceptor.TestInterceptor"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>

<p>TestInterceptor.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">TestInterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 前置拦截器，返回为 true 放行</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> handler</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * Controller 方法执行后，渲染视图前会执行</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> handler</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> modelAndView</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">postHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, ModelAndView modelAndView)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 渲染视图之后会执行。</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> handler</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> ex</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">void</span> <span class="title">afterCompletion</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler, Exception ex)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="案例：未登录拦截的实现"><a href="#案例：未登录拦截的实现" class="headerlink" title="案例：未登录拦截的实现"></a>案例：未登录拦截的实现</h2><hr>
<p>CheckLoginInterceptor.java</p>
<figure class="highlight java"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">public</span> <span class="class"><span class="keyword">class</span> <span class="title">CheckLoginInterceptor</span> <span class="keyword">implements</span> <span class="title">HandlerInterceptor</span> </span>&#123;</span><br><span class="line"></span><br><span class="line">    <span class="comment">/**</span></span><br><span class="line"><span class="comment">     * 前置拦截器，返回为 true 放行</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> request</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> response</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@param</span> handler</span></span><br><span class="line"><span class="comment">     * <span class="doctag">@return</span></span></span><br><span class="line"><span class="comment">     * <span class="doctag">@throws</span> Exception</span></span><br><span class="line"><span class="comment">     */</span></span><br><span class="line">    <span class="meta">@Override</span></span><br><span class="line">    <span class="function"><span class="keyword">public</span> <span class="keyword">boolean</span> <span class="title">preHandle</span><span class="params">(HttpServletRequest request, HttpServletResponse response, Object handler)</span> <span class="keyword">throws</span> Exception </span>&#123;</span><br><span class="line">        Object employee = request.getSession().getAttribute(<span class="string">"EMPLOYEE_IN_SESSION"</span>);</span><br><span class="line">        <span class="keyword">if</span> (employee == <span class="keyword">null</span>) &#123;</span><br><span class="line">            <span class="comment">// 未登录</span></span><br><span class="line">            response.sendRedirect(<span class="string">"/login"</span>);</span><br><span class="line">            <span class="keyword">return</span> <span class="keyword">false</span>;</span><br><span class="line">        &#125;</span><br><span class="line">        <span class="keyword">return</span> <span class="keyword">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>mvc.xml</p>
<figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">&lt;!-- 配置拦截器 --&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">mvc:interceptors</span>&gt;</span></span><br><span class="line">	<span class="tag">&lt;<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- /* 表示只能拦截一级路径，/** 表示可以拦截一级或者多级路径 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">mvc:mapping</span> <span class="attr">path</span>=<span class="string">"/**"</span>/&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 不想拦截的路径 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">mvc:exclude-mapping</span> <span class="attr">path</span>=<span class="string">"/login/**"</span>/&gt;</span></span><br><span class="line">		<span class="comment">&lt;!-- 拦截器，可以配置多个，会按顺序执行整个拦截链条 --&gt;</span></span><br><span class="line">		<span class="tag">&lt;<span class="name">bean</span> <span class="attr">class</span>=<span class="string">"cn.lizhaoloveit.ssm.web.interceptor.CheckLoginInterceptor"</span>/&gt;</span></span><br><span class="line">	<span class="tag">&lt;/<span class="name">mvc:interceptor</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">mvc:interceptors</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h1 id="异常处理"><a href="#异常处理" class="headerlink" title="异常处理"></a>异常处理</h1><hr>
</div></article><div class="post-copyright"><div class="post-copyright__author"><span class="post-copyright-meta">文章作者: </span><span class="post-copyright-info"><a href="mailto:undefined">Ammar</a></span></div><div class="post-copyright__type"><span class="post-copyright-meta">文章链接: </span><span class="post-copyright-info"><a href="http://lizhaoloveit.cn/2019/08/04/SpringMVC/">http://lizhaoloveit.cn/2019/08/04/SpringMVC/</a></span></div><div class="post-copyright__notice"><span class="post-copyright-meta">版权声明: </span><span class="post-copyright-info">本博客所有文章除特别声明外，均采用 <a href="https://creativecommons.org/licenses/by-nc-sa/4.0/" target="_blank" rel="noopener">CC BY-NC-SA 4.0</a> 许可协议。转载请注明来自 <a href="http://lizhaoloveit.cn">Ammar's Blog</a>！</span></div></div><div class="tag_share"><div class="post-meta__tag-list"><a class="post-meta__tags" href="/tags/SpringMVC/">SpringMVC    </a></div><div class="post_share"><div class="social-share" data-image="https://lizhaoloveit.cn/blogimages/blog/avatar.jpg" data-sites="facebook,twitter,wechat,weibo,qq"></div><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/css/share.min.css"><script src="https://cdn.jsdelivr.net/npm/social-share.js@1.0.16/dist/js/social-share.min.js"></script></div></div><div class="post-reward"><a class="reward-buttom"><i class="fa fa-qrcode"></i> 打赏<div class="reward-main"><ul class="reward-all"><li class="reward-item"><img class="lozad post-qr-code__img" data-src="/img/wechat.jpg"><div class="post-qr-code__desc">微信</div></li><li class="reward-item"><img class="lozad post-qr-code__img" data-src="/img/alipay.jpg"><div class="post-qr-code__desc">支付宝</div></li></ul></div></a></div><nav class="pagination_post" id="pagination"><div class="prev-post pull-left"><a href="/2019/08/05/commons-logging/"><img class="prev_cover lozad" data-src="https://www.lizhaoloveit.cn/blogimages/blog/cover/1.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/2.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/3.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/4.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/5.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/6.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/7.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/8.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/9.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/10.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/11.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/12.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/13.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/14.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/15.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/16.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/17.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/18.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/19.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/20.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/21.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/22.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/23.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/24.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/25.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/26.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/27.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/28.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/29.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/31.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/32.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/33.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/34.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/35.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/36.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/37.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/38.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/39.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/40.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/41.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/42.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/43.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/44.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/45.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/46.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/47.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/48.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/49.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/50.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/51.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/52.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/53.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/54.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/55.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/56.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/57.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/58.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/59.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/60.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/62.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/63.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/64.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/65.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/66.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/67.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/68.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/69.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/70.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/71.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/72.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/73.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/74.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/75.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/76.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/77.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/78.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/79.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">上一篇</div><div class="prev_info"><span>commons-logging</span></div></a></div><div class="next-post pull-right"><a href="/2019/08/04/Spring%E6%B3%A8%E8%A7%A3%E5%BC%80%E5%8F%91/"><img class="next_cover lozad" data-src="https://www.lizhaoloveit.cn/blogimages/blog/cover/1.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/2.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/3.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/4.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/5.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/6.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/7.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/8.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/9.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/10.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/11.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/12.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/13.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/14.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/15.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/16.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/17.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/18.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/19.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/20.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/21.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/22.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/23.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/24.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/25.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/26.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/27.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/28.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/29.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/31.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/32.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/33.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/34.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/35.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/36.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/37.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/38.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/39.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/40.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/41.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/42.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/43.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/44.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/45.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/46.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/47.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/48.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/49.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/50.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/51.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/52.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/53.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/54.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/55.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/56.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/57.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/58.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/59.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/60.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/62.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/63.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/64.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/65.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/66.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/67.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/68.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/69.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/70.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/71.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/72.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/73.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/74.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/75.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/76.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/77.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/78.jpg,https://www.lizhaoloveit.cn/blogimages/blog/cover/79.jpg" onerror="onerror=null;src='/img/404.jpg'"><div class="label">下一篇</div><div class="next_info"><span>Spring注解开发</span></div></a></div></nav><hr><div id="post-comment"><div class="comment_headling"><i class="fa fa-comments fa-fw" aria-hidden="true"></i> <span>评论</span></div><div id="disqus_thread"></div><script>var unused = null;
var disqus_config = function () {
  this.page.url = 'http://lizhaoloveit.cn/2019/08/04/SpringMVC/';
  this.page.identifier = '2019/08/04/SpringMVC/';
  this.page.title = 'SpringMVC';
}
var d = document, s = d.createElement('script');
s.src = "https://" + 'lizhao' +".disqus.com/embed.js";
s.setAttribute('data-timestamp', '' + +new Date());
(d.head || d.body).appendChild(s);</script></div></div></div><footer><div class="layout" id="footer"><div class="copyright">&copy;2014 - 2022 By Ammar</div><div class="icp"><a href="https://beian.miit.gov.cn/" target="_blank" rel="noopener"><span>浙ICP备19013619号-1</span></a></div><div class="bag"><a href="http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=33010502006128" target="_blank" rel="noopener"><img src="/img/beian.png"><span>浙公网安备 33010502006128号</span></a></div></div></footer><i class="fa fa-arrow-up" id="go-up" aria-hidden="true"></i><section class="rightside" id="rightside"><i class="fa fa-book" id="readmode" title="阅读模式"> </i><i class="fa fa-plus" id="font_plus" title="放大字体"></i><i class="fa fa-minus" id="font_minus" title="缩小字体"></i><a class="translate_chn_to_cht" id="translateLink" href="javascript:translatePage();" title="简繁转换">繁</a><i class="far fa-moon nightshift" id="nightshift" title="夜间模式"></i></section><script src="https://cdn.jsdelivr.net/npm/jquery@latest/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/@fancyapps/fancybox@latest/dist/jquery.fancybox.min.js"></script><script src="https://cdn.jsdelivr.net/npm/js-cookie@2/src/js.cookie.min.js"></script><script src="https://cdn.jsdelivr.net/npm/lozad/dist/lozad.min.js"></script><script src="/js/utils.js"></script><script src="/js/main.js"></script><script async src="/js/search/algolia.js"></script><script src="/js/nightshift.js"></script><script src="/js/tw_cn.js"></script><script>translateInitilization()

</script><script src="https://cdn.jsdelivr.net/npm/instant.page@1.2.2/instantpage.min.js" type="module"></script><div class="search-dialog" id="algolia-search"><div class="search-dialog__title" id="algolia-search-title">Algolia</div><div id="algolia-input-panel"><div id="algolia-search-input"></div></div><hr><div id="algolia-search-results"><div id="algolia-hits"></div><div id="algolia-pagination"></div><div id="algolia-stats"></div></div><span class="search-close-button"><i class="fa fa-times"></i></span></div><div class="search-mask"></div></body></html>